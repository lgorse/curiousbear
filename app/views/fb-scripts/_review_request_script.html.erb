 <script> 
 FB.init({appId: '<%= Facebook::APP_ID.to_s %>', status: true, cookie: true});

 function postToFeed(restaurant_name, user_name, has_rated) {
        // calling the API ...
        if (has_rated){ 
          var obj = {
            method: 'feed',
            link: '<%= Facebook::SITE_URL %>',
            picture:"<%= Facebook::SITE_URL %>assets/fb-logo-75.png",
            name: user_name +' has reviewed '+ restaurant_name,
            caption: user_name+' shared a review',
            description: unescape('Find out how '+user_name+' feels about '+restaurant_name+'. Share your own food reviews on <b><%= APP_NAME %></b>.')
          };
        }else{
          var obj = {
            method: 'feed',
            link: '<%= Facebook::SITE_URL %>',
            picture:"<%= Facebook::SITE_URL %>assets/fb-logo-75.png",
            name: 'Anyone been to '+ restaurant_name+'?',
            caption: user_name+' needs your help',
            description: unescape('How good is '+restaurant_name+'? Help '+user_name+' decide on <b><%= APP_NAME %></b>.')
          };
        }

        function callback(response) {
        	if (response['post_id']){
        		document.getElementById('msg').innerHTML = "Request posted!";
        	}
        }

        FB.ui(obj, callback);
      }
      
      </script>